# Aliases
alias l='ls --color=auto'
alias ls='ls --color=auto'
alias ll='ls -la --color=auto'
alias vim=nvim
alias claude='claude --dangerously-skip-permissions'

# Source .zprofile for environment variables
[[ -f ~/.zprofile ]] && source ~/.zprofile

# Enable prompt substitution
setopt PROMPT_SUBST

# Git prompt function
git_prompt_info() {
    local branch
    branch=$(git symbolic-ref --short HEAD 2>/dev/null)

    if [[ -n "$branch" ]]; then
        local git_status=""
        local color="%F{green}"

        # Check for uncommitted changes
        if ! git diff --quiet 2>/dev/null; then
            git_status+="*"
            color="%F{yellow}"
        fi

        # Check for staged changes
        if ! git diff --cached --quiet 2>/dev/null; then
            git_status+="+"
            color="%F{yellow}"
        fi

        # Check for untracked files
        if [[ -n $(git ls-files --others --exclude-standard 2>/dev/null) ]]; then
            git_status+="?"
            color="%F{yellow}"
        fi

        # Check if ahead/behind remote
        local ahead_behind
        ahead_behind=$(git rev-list --left-right --count @{upstream}...HEAD 2>/dev/null)
        if [[ -n "$ahead_behind" ]]; then
            local behind=$(echo $ahead_behind | awk '{print $1}')
            local ahead=$(echo $ahead_behind | awk '{print $2}')

            [[ $ahead -gt 0 ]] && git_status+="↑$ahead"
            [[ $behind -gt 0 ]] && git_status+="↓$behind"
        fi

        echo " ${color}(${branch}${git_status:+ $git_status})%f"
    fi
}

# Build the prompt
PROMPT='%F{cyan}%~%f$(git_prompt_info) %F{white}❯%f '

